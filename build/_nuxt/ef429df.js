/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{402:function(e,t,n){var content=n(449);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(131).default)("6759f5ab",content,!0,{sourceMap:!1})},406:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{m(r.next(e))}catch(e){c(e)}}function d(e){try{m(r.throw(e))}catch(e){c(e)}}function m(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}m((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const c=o(n(407)),l=o(n(426));e.exports=function(e){return r(this,void 0,void 0,(function*(){const t=e.free_api?"api-free":"api";return c.default.post(`https://${t}.deepl.com/v2/translate`,l.default.stringify(e))}))}},426:function(e,t,n){"use strict";t.decode=t.parse=n(427),t.encode=t.stringify=n(428)},427:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,c){t=t||"&",n=n||"=";var l={};if("string"!=typeof e||0===e.length)return l;var d=/\+/g;e=e.split(t);var m=1e3;c&&"number"==typeof c.maxKeys&&(m=c.maxKeys);var h=e.length;m>0&&h>m&&(h=m);for(var i=0;i<h;++i){var f,v,y,k,w=e[i].replace(d,"%20"),x=w.indexOf(n);x>=0?(f=w.substr(0,x),v=w.substr(x+1)):(f=w,v=""),y=decodeURIComponent(f),k=decodeURIComponent(v),r(l,y)?o(l[y])?l[y].push(k):l[y]=[l[y],k]:l[y]=k}return l};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},428:function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,l){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?map(c(e),(function(c){var l=encodeURIComponent(r(c))+n;return o(e[c])?map(e[c],(function(e){return l+encodeURIComponent(r(e))})).join(t):l+encodeURIComponent(r(e[c]))})).join(t):l?encodeURIComponent(r(l))+n+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function map(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var c=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},429:function(e,t,n){"use strict";(function(e){var r=new(n(430).a)({accessToken:e.env.ACCESS_TOKEN,oauthToken:"oEUkARZp6T0hsoGu5MzQoAtt-93801-ThmkXinfFu3HiGeYzNku"});t.a=r}).call(this,n(247))},430:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(392),o=n.n(r);function c(e){return"number"==typeof e&&e==e&&e!==1/0&&e!==-1/0}function s(e,s,t){if(!c(s))throw new TypeError("Expected `limit` to be a finite number");if(!c(t))throw new TypeError("Expected `interval` to be a finite number");var i=[],n=[],r=0,a=function(){r++;var o=setTimeout((function(){r--,i.length>0&&a(),n=n.filter((function(e){return e!==o}))}),t);n.indexOf(o)<0&&n.push(o);var s=i.shift();s.resolve(e.apply(s.self,s.args))},o=function(){var e=arguments,t=this;return new Promise((function(n,o){i.push({resolve:n,reject:o,args:e,self:t}),r<s&&a()}))};return o.abort=function(){n.forEach(clearTimeout),n=[],i.forEach((function(e){e.reject(new throttle.AbortError)})),i.length=0},o}s.AbortError=function(){Error.call(this,"Throttled function aborted"),this.name="AbortError"};const l=function(e,t){if(!e)return null;let s={};for(let n in e){let i=e[n];t.indexOf(n)>-1&&null!==i&&(s[n]=i)}return s};var i={nodes:{horizontal_rule:()=>({singleTag:"hr"}),blockquote:()=>({tag:"blockquote"}),bullet_list:()=>({tag:"ul"}),code_block:e=>({tag:["pre",{tag:"code",attrs:e.attrs}]}),hard_break:()=>({singleTag:"br"}),heading:e=>({tag:`h${e.attrs.level}`}),image:e=>({singleTag:[{tag:"img",attrs:l(e.attrs,["src","alt","title"])}]}),list_item:()=>({tag:"li"}),ordered_list:()=>({tag:"ol"}),paragraph:()=>({tag:"p"})},marks:{bold:()=>({tag:"b"}),strike:()=>({tag:"strike"}),underline:()=>({tag:"u"}),strong:()=>({tag:"strong"}),code:()=>({tag:"code"}),italic:()=>({tag:"i"}),link(e){const t={...e.attrs},{linktype:s="url"}=e.attrs;return"email"===s&&(t.href=`mailto:${t.href}`),t.anchor&&(t.href=`${t.href}#${t.anchor}`,delete t.anchor),{tag:[{tag:"a",attrs:t}]}},styled:e=>({tag:[{tag:"span",attrs:e.attrs}]})}};class d{constructor(e){e||(e=i),this.marks=e.marks||[],this.nodes=e.nodes||[]}addNode(e,t){this.nodes[e]=t}addMark(e,t){this.marks[e]=t}render(e={}){if(e.content&&Array.isArray(e.content)){let t="";return e.content.forEach((e=>{t+=this.renderNode(e)})),t}return console.warn("The render method must receive an object with a content field, which is an array"),""}renderNode(e){let t=[];e.marks&&e.marks.forEach((e=>{const s=this.getMatchingMark(e);s&&t.push(this.renderOpeningTag(s.tag))}));const s=this.getMatchingNode(e);return s&&s.tag&&t.push(this.renderOpeningTag(s.tag)),e.content?e.content.forEach((e=>{t.push(this.renderNode(e))})):e.text?t.push(function(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},s=/[&<>"']/g,n=RegExp(s.source);return e&&n.test(e)?e.replace(s,(e=>t[e])):e}(e.text)):s&&s.singleTag?t.push(this.renderTag(s.singleTag," /")):s&&s.html&&t.push(s.html),s&&s.tag&&t.push(this.renderClosingTag(s.tag)),e.marks&&e.marks.slice(0).reverse().forEach((e=>{const s=this.getMatchingMark(e);s&&t.push(this.renderClosingTag(s.tag))})),t.join("")}renderTag(e,t){return e.constructor===String?`<${e}${t}>`:e.map((e=>{if(e.constructor===String)return`<${e}${t}>`;{let s=`<${e.tag}`;if(e.attrs)for(let t in e.attrs){let n=e.attrs[t];null!==n&&(s+=` ${t}="${n}"`)}return`${s}${t}>`}})).join("")}renderOpeningTag(e){return this.renderTag(e,"")}renderClosingTag(e){return e.constructor===String?`</${e}>`:e.slice(0).reverse().map((e=>e.constructor===String?`</${e}>`:`</${e.tag}>`)).join("")}getMatchingNode(e){if("function"==typeof this.nodes[e.type])return this.nodes[e.type](e)}getMatchingMark(e){if("function"==typeof this.marks[e.type])return this.marks[e.type](e)}}const m=(e=0,t=e)=>{const s=Math.abs(t-e)||0,n=e<t?1:-1;return((e=0,t)=>[...Array(e)].map(t))(s,((t,s)=>s*n+e))},a=(e,t,s)=>{const n=[];for(const i in e){if(!Object.prototype.hasOwnProperty.call(e,i))continue;const r=e[i],o=s?"":encodeURIComponent(i);let c;c="object"==typeof r?a(r,t?t+encodeURIComponent("["+o+"]"):o,Array.isArray(r)):(t?t+encodeURIComponent("["+o+"]"):o)+"="+encodeURIComponent(r),n.push(c)}return n.join("&")};let h={},f={};class v{constructor(e,t){if(!t){let n=e.region?`-${e.region}`:"",s=!1===e.https?"http":"https";t=void 0===e.oauthToken?`${s}://api${n}.storyblok.com/v2`:`${s}://api${n}.storyblok.com/v1`}let i=Object.assign({},e.headers),n=5;void 0!==e.oauthToken&&(i.Authorization=e.oauthToken,n=3),void 0!==e.rateLimit&&(n=e.rateLimit),this.richTextResolver=new d(e.richTextSchema),"function"==typeof e.componentResolver&&this.setComponentResolver(e.componentResolver),this.maxRetries=e.maxRetries||5,this.throttle=s(this.throttledRequest,n,1e3),this.accessToken=e.accessToken,this.relations={},this.links={},this.cache=e.cache||{clear:"manual"},this.client=o.a.create({baseURL:t,timeout:e.timeout||0,headers:i,proxy:e.proxy||!1}),e.responseInterceptor&&this.client.interceptors.response.use((t=>e.responseInterceptor(t))),this.resolveNestedRelations=e.resolveNestedRelations||!0}setComponentResolver(e){this.richTextResolver.addNode("blok",(t=>{let s="";return t.attrs.body.forEach((t=>{s+=e(t.component,t)})),{html:s}}))}parseParams(e={}){return e.version||(e.version="published"),e.token||(e.token=this.getToken()),e.cv||(e.cv=f[e.token]),Array.isArray(e.resolve_relations)&&(e.resolve_relations=e.resolve_relations.join(",")),e}factoryParamOptions(e,t={}){return((e="")=>e.indexOf("/cdn/")>-1)(e)?this.parseParams(t):t}makeRequest(e,t,s,n){const i=this.factoryParamOptions(e,((e={},t=25,s=1)=>({...e,per_page:t,page:s}))(t,s,n));return this.cacheResponse(e,i)}get(e,t){let s=`/${e}`;const n=this.factoryParamOptions(s,t);return this.cacheResponse(s,n)}async getAll(e,t={},s){const n=t.per_page||25,i=`/${e}`,r=i.split("/");s=s||r[r.length-1];const a=await this.makeRequest(i,t,n,1),o=Math.ceil(a.total/n);return((e=[],t)=>e.map(t).reduce(((e,t)=>[...e,...t]),[]))([a,...await(async(e=[],t)=>Promise.all(e.map(t)))(m(1,o),(async e=>this.makeRequest(i,t,n,e+1)))],(e=>Object.values(e.data[s])))}post(e,t){let s=`/${e}`;return this.throttle("post",s,t)}put(e,t){let s=`/${e}`;return this.throttle("put",s,t)}delete(e,t){let s=`/${e}`;return this.throttle("delete",s,t)}getStories(e){return this.get("cdn/stories",e)}getStory(e,t){return this.get(`cdn/stories/${e}`,t)}setToken(e){this.accessToken=e}getToken(){return this.accessToken}_cleanCopy(e){return JSON.parse(JSON.stringify(e))}_insertLinks(e,t){const s=e[t];s&&"multilink"==s.fieldtype&&"story"==s.linktype&&"string"==typeof s.id&&this.links[s.id]?s.story=this._cleanCopy(this.links[s.id]):s&&"story"===s.linktype&&"string"==typeof s.uuid&&this.links[s.uuid]&&(s.story=this._cleanCopy(this.links[s.uuid]))}_insertRelations(e,t,s){if(s.indexOf(e.component+"."+t)>-1)if("string"==typeof e[t])this.relations[e[t]]&&(e[t]=this._cleanCopy(this.relations[e[t]]));else if(e[t].constructor===Array){let s=[];e[t].forEach((e=>{this.relations[e]&&s.push(this._cleanCopy(this.relations[e]))})),e[t]=s}}_insertAssetsRelations(e,t){t.forEach((t=>{e.id===t.id&&(e.original=t,e.original.filename=e.filename,e.original.filename=e.original.filename.includes("https://s3.amazonaws.com/")?e.original.filename:e.original.filename.replace("https://","https://s3.amazonaws.com/"),delete e.original.s3_filename)}))}iterateTree(e,t){let s=e=>{if(null!=e)if(e.constructor===Array)for(let t=0;t<e.length;t++)s(e[t]);else if(e.constructor===Object){if(e._stopResolving)return;for(let n in e)e.component&&e._uid||"link"===e.type?(this._insertRelations(e,n,t),this._insertLinks(e,n)):"asset"===e.fieldtype&&this._insertAssetsRelations(e,t),s(e[n])}};s(e.content)}async resolveLinks(e,t){let s=[];if(e.link_uuids){const n=e.link_uuids.length;let i=[];const r=50;for(let t=0;t<n;t+=r){const s=Math.min(n,t+r);i.push(e.link_uuids.slice(t,s))}for(let e=0;e<i.length;e++)(await this.getStories({per_page:r,language:t.language,version:t.version,by_uuids:i[e].join(",")})).data.stories.forEach((e=>{s.push(e)}))}else s=e.links;s.forEach((e=>{this.links[e.uuid]={...e,_stopResolving:!0}}))}async resolveRelations(e,t){let s=[];if(e.rel_uuids){const n=e.rel_uuids.length;let i=[];const r=50;for(let t=0;t<n;t+=r){const s=Math.min(n,t+r);i.push(e.rel_uuids.slice(t,s))}for(let e=0;e<i.length;e++)(await this.getStories({per_page:r,language:t.language,version:t.version,by_uuids:i[e].join(",")})).data.stories.forEach((e=>{s.push(e)}))}else s=e.rels;s.forEach((e=>{this.relations[e.uuid]={...e,_stopResolving:!0}}))}async resolveStories(e,t){let s=[];if(void 0!==t.resolve_relations&&t.resolve_relations.length>0&&e.rels&&e.links&&(s=t.resolve_relations.split(","),await this.resolveRelations(e,t)),["1","story","url"].indexOf(t.resolve_links)>-1&&(e.links||e.rels)&&await this.resolveLinks(e,t),this.resolveNestedRelations)for(const e in this.relations)this.iterateTree(this.relations[e],s);e.story?this.iterateTree(e.story,s):e.stories.forEach((e=>{this.iterateTree(e,s)}))}resolveAssetsRelations(e){const{assets:t,stories:s,story:n}=e;if(s)for(const e of s)this.iterateTree(e,t);else this.iterateTree(n,t)}cacheResponse(e,t,s){return void 0===s&&(s=0),new Promise((async(n,i)=>{let r=a({url:e,params:t}),o=this.cacheProvider();if("auto"===this.cache.clear&&"draft"===t.version&&await this.flushCache(),"published"===t.version&&"/cdn/spaces/me"!=e){const e=await o.get(r);if(e)return n(e)}try{let s=await this.throttle("get",e,{params:t,paramsSerializer:e=>a(e)}),c={data:s.data,headers:s.headers};if(c.data.assets&&c.data.assets.length&&this.resolveAssetsRelations(c.data),s.headers["per-page"]&&(c=Object.assign({},c,{perPage:parseInt(s.headers["per-page"]),total:parseInt(s.headers.total)})),200!=s.status)return i(s);(c.data.story||c.data.stories)&&await this.resolveStories(c.data,t),"published"===t.version&&"/cdn/spaces/me"!=e&&o.set(r,c),c.data.cv&&("draft"==t.version&&f[t.token]!=c.data.cv&&this.flushCache(),f[t.token]=c.data.cv),n(c)}catch(r){if(r.response&&429===r.response.status&&(s+=1)<this.maxRetries)return console.log(`Hit rate limit. Retrying in ${s} seconds.`),await(c=1e3*s,new Promise((e=>setTimeout(e,c)))),this.cacheResponse(e,t,s).then(n).catch(i);i(r)}var c}))}throttledRequest(e,t,s){return this.client[e](t,s)}cacheVersions(){return f}cacheVersion(){return f[this.accessToken]}setCacheVersion(e){this.accessToken&&(f[this.accessToken]=e)}cacheProvider(){return"memory"===this.cache.type?{get:e=>h[e],getAll:()=>h,set(e,t){h[e]=t},flush(){h={}}}:{get(){},getAll(){},set(){},flush(){}}}async flushCache(){return await this.cacheProvider().flush(),this}}},448:function(e,t,n){"use strict";n(402)},449:function(e,t,n){var r=n(130)(!1);r.push([e.i,".el-row{margin-bottom:20px}.el-row:last-child{margin-bottom:0}.fontStyle{font-family:sans-serif}.el-notification__title{font-weight:700;font-size:16px;color:#303133;margin:0;font-family:sans-serif}.el-notification__content{font-size:14px;line-height:21px;margin:6px 0 0;color:#606266;text-align:justify;font-family:sans-serif}.el-notification{display:flex;width:270px;padding:14px 26px 14px 13px;border-radius:8px;box-sizing:border-box;border:1px solid #ebeef5;position:fixed;background-color:#fff;box-shadow:0 2px 12px 0 rgb(0 0 0/10%);transition:opacity .3s,transform .3s,left .3s,right .3s,top .4s,bottom .3s;overflow:hidden}p{font-size:smaller}.error-text{color:#f56c6c;font-weight:700}",""]),e.exports=r},450:function(e,t,n){"use strict";n.r(t);n(70),n(37),n(48),n(92),n(93);var r=n(36),o=n(35),c=n(10),l=(n(67),n(69),n(49),n(29),n(381),n(68),n(248),n(382),n(94),n(129),n(90),n(91),n(38),n(181)),d=(n(405),n(406)),m=n.n(d),h=["DE","EN","FR","IT","JA","ES","NL","PL","PT","RU","ZH"],f=function(e){return e.split("-")[0].toUpperCase()},v=[{code:400,message:"Please check error message and your parameters."},{code:403,message:"API key is invalid/expired."},{code:413,message:"The request size exceeds the limit."},{code:429,message:"Too many requests. Please wait and resend your request."},{code:456,message:"Content is too long."},{code:503,message:"Service not available. Please try again later."},{code:529,message:"Too many requests. Please wait and try again later."}],y=function(e){var t=v.findIndex((function(t){return t.code===e}));-1!==t&&v[t]?l.Notification.error({title:"Error",message:v[t].message}):l.Notification.error({title:"Error",message:"Something went wrong.. Please try again in a bit."})},k=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(text,t,n,r){var o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=f(t),c=""!==n?f(n):"",d=o,-1===h.indexOf(d)){e.next=14;break}return e.prev=3,e.next=6,m()({text:text,target_lang:o,source_lang:c,auth_key:r,tag_handling:"xml",split_sentences:"1"});case 6:return l=e.sent,e.abrupt("return",l.data);case 10:return e.prev=10,e.t0=e.catch(3),y(e.t0.response.status),e.abrupt("return",void 0);case 14:return e.abrupt("return",void 0);case 15:case"end":return e.stop()}var d}),e,null,[[3,10]])})));return function(t,n,r,o){return e.apply(this,arguments)}}(),w=n(429),x=n(392),O=n.n(x),_=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("spaces/".concat(t,"/datasources"),{slug:n}).then((function(e){return e})).catch((function(e){console.log(e)}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t){var n,r,o,c,l,d,m,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",r="",o=!0,c=!0,l=void 0,d=void 0,e.next=8,w.a.get("spaces/".concat(t,"/datasource_entries"),{datasource_slug:"deepl-api-key"}).then((function(e){return e})).catch((function(e){console.log(e)}));case 8:return m=e.sent,e.next=11,w.a.get("spaces/".concat(t,"/datasource_entries"),{datasource_slug:"mode-of-translation"}).then((function(e){return e})).catch((function(e){console.log(e)}));case 11:return h=e.sent,e.next=14,R(m,"Api key for DeepL","Deepl-Api-key","deepl-api-key","Enter-Api-Key-Here",!1,t);case 14:return l=e.sent,e.next=17,R(h,"Mode Of Translation","Mode-Of-Translation","mode-of-translation","FOLDER_LEVEL-OR-FIELD_LEVEL",!0,t);case 17:return d=e.sent,l&&(n=l.entryData,c=l.entryDoesNotExist),d&&(r=d.entryData,o=d.entryDoesNotExist),e.abrupt("return",{apiKey:n,invalidKey:c,modeOfTranslation:r,invalidMode:o});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,n,r,o,c,l,d){var m,h,f,v,y,k,w,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m="",h=!0,t){e.next=17;break}return e.next=5,T(d,n,o);case 5:if(!(f=e.sent)){e.next=15;break}return e.next=9,E(d,r,c,f.data.datasource.id);case 9:if(!(v=e.sent)){e.next=14;break}m=v.data.datasource_entry,e.next=15;break;case 14:return e.abrupt("return",!1);case 15:e.next=36;break;case 17:if(!(y=t.data.datasource_entries.find((function(element){return element.name===r})))){e.next=22;break}l?y.value.trim()===c.split("-OR-")[0]||y.value.trim()===c.split("-OR-")[1]?(m=y.value,h=!1):h=!0:y.value.trim()!==c?(m=y.value,h=!1):h=!0,e.next=36;break;case 22:return e.next=24,_(d,o);case 24:if(!(k=e.sent)){e.next=35;break}return w=k.data.datasources.find((function(element){return element.slug===o})).id,e.next=29,E(d,r,c,w);case 29:if(!(x=e.sent)){e.next=34;break}m=x.data.datasource_entry,e.next=35;break;case 34:return e.abrupt("return",!1);case 35:h=!0;case 36:return e.abrupt("return",{entryData:m,entryDoesNotExist:h});case 37:case"end":return e.stop()}}),e)})));return function(t,n,r,o,c,l,d){return e.apply(this,arguments)}}(),T=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("spaces/".concat(t,"/datasources"),{datasource:{name:n,slug:r}}).then((function(e){return console.log(e),e})).catch((function(e){console.log(e)}));case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),E=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,n,r,o){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post("spaces/".concat(t,"/datasource_entries"),{datasource_entry:{name:n,value:r,datasource_id:o}}).then((function(e){return console.log(e),e})).catch((function(e){console.log(e)}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,n,r){var o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("spaces/".concat(t,"/stories/").concat(n),{}).then((function(e){return e.data.story})).catch((function(e){console.log(e)}));case 2:return o=e.sent,e.next=5,w.a.get("spaces/".concat(t,"/stories/").concat(n,"/export.json"),{}).then((function(e){return console.log("response of fetched stor",e),e.data})).catch((function(e){console.log(e)}));case 5:return c=e.sent,e.next=8,w.a.get("spaces/".concat(t,"/stories/").concat(n,"/export.json"),{lang_code:r}).then((function(e){return console.log("response of fetched stor",e),e.data})).catch((function(e){console.log(e)}));case 8:return l=e.sent,e.abrupt("return",{storyObj:o,storyJSON:c,storyJSONWithLang:l});case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),L=function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,n,r,o){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.put("spaces/".concat(t,"/stories/").concat(n,"/import.json"),{data:r,lang_code:o||""}).then((function(e){return e.data.story})).catch((function(e){console.log(e)}));case 2:return c=e.sent,console.log("updated response",c),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),A=[{code:"af",name:"Afrikaans"},{code:"sq",name:"Albanian"},{code:"ar",name:"Arabic"},{code:"ar-dz",name:"Arabic (Algeria)"},{code:"ar-bh",name:"Arabic (Bahrain)"},{code:"ar-eg",name:"Arabic (Egypt)"},{code:"ar-iq",name:"Arabic (Iraq)"},{code:"ar-jo",name:"Arabic (Jordan)"},{code:"ar-kw",name:"Arabic (Kuwait)"},{code:"ar-lb",name:"Arabic (Lebanon)"},{code:"ar-ly",name:"Arabic (Libya)"},{code:"ar-ma",name:"Arabic (Morocco)"},{code:"ar-om",name:"Arabic (Oman)"},{code:"ar-qa",name:"Arabic (Qatar)"},{code:"ar-sa",name:"Arabic (Saudi Arabia)"},{code:"ar-sy",name:"Arabic (Syria)"},{code:"ar-tn",name:"Arabic (Tunisia)"},{code:"ar-ae",name:"Arabic (U.A.E.)"},{code:"ar-ye",name:"Arabic (Yemen)"},{code:"an",name:"Aragonese"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"ast",name:"Asturian"},{code:"az",name:"Azerbaijani"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bs",name:"Bosnian"},{code:"br",name:"Breton"},{code:"bg",name:"Bulgarian"},{code:"my",name:"Burmese"},{code:"ca",name:"Catalan"},{code:"ch",name:"Chamorro"},{code:"ce",name:"Chechen"},{code:"zh",name:"Chinese"},{code:"zh-hk",name:"Chinese (Hong Kong)"},{code:"zh-cn",name:"Chinese (PRC)"},{code:"zh-sg",name:"Chinese (Singapore)"},{code:"zh-tw",name:"Chinese (Taiwan)"},{code:"cv",name:"Chuvash"},{code:"co",name:"Corsican"},{code:"cr",name:"Cree"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"nl",name:"Dutch"},{code:"nl-be",name:"Dutch (Belgian)"},{code:"en",name:"English"},{code:"en-au",name:"English (Australia)"},{code:"en-bz",name:"English (Belize)"},{code:"en-ca",name:"English (Canada)"},{code:"en-ie",name:"English (Ireland)"},{code:"en-jm",name:"English (Jamaica)"},{code:"en-nz",name:"English (New Zealand)"},{code:"en-ph",name:"English (Philippines)"},{code:"en-za",name:"English (South Africa)"},{code:"en-tt",name:"English (Trinidad &amp; Tobago)"},{code:"en-gb",name:"English (United Kingdom)"},{code:"en-us",name:"English (United States)"},{code:"en-zw",name:"English (Zimbabwe)"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"fo",name:"Faeroese"},{code:"fa",name:"Farsi"},{code:"fj",name:"Fijian"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"fr-be",name:"French (Belgium)"},{code:"fr-ca",name:"French (Canada)"},{code:"fr-fr",name:"French (France)"},{code:"fr-lu",name:"French (Luxembourg)"},{code:"fr-mc",name:"French (Monaco)"},{code:"fr-ch",name:"French (Switzerland)"},{code:"fy",name:"Frisian"},{code:"fur",name:"Friulian"},{code:"gd",name:"Gaelic (Scots)"},{code:"gd-ie",name:"Gaelic (Irish)"},{code:"gl",name:"Galacian"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"de-at",name:"German (Austria)"},{code:"de-de",name:"German (Germany)"},{code:"de-li",name:"German (Liechtenstein)"},{code:"de-lu",name:"German (Luxembourg)"},{code:"de-ch",name:"German (Switzerland)"},{code:"el",name:"Greek"},{code:"gu",name:"Gujurati"},{code:"ht",name:"Haitian"},{code:"he",name:"Hebrew"},{code:"hi",name:"Hindi"},{code:"hu",name:"Hungarian"},{code:"is",name:"Icelandic"},{code:"id",name:"Indonesian"},{code:"iu",name:"Inuktitut"},{code:"ga",name:"Irish"},{code:"it",name:"Italian"},{code:"it-ch",name:"Italian (Switzerland)"},{code:"ja",name:"Japanese"},{code:"kn",name:"Kannada"},{code:"ks",name:"Kashmiri"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"ky",name:"Kirghiz"},{code:"tlh",name:"Klingon"},{code:"ko",name:"Korean"},{code:"ko-kp",name:"Korean (North Korea)"},{code:"ko-kr",name:"Korean (South Korea)"},{code:"la",name:"Latin"},{code:"lv",name:"Latvian"},{code:"lt",name:"Lithuanian"},{code:"lb",name:"Luxembourgish"},{code:"mk",name:"FYRO Macedonian"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"Maori"},{code:"mr",name:"Marathi"},{code:"mo",name:"Moldavian"},{code:"nv",name:"Navajo"},{code:"ng",name:"Ndonga"},{code:"ne",name:"Nepali"},{code:"no",name:"Norwegian"},{code:"nb",name:"Norwegian (Bokmal)"},{code:"nn",name:"Norwegian (Nynorsk)"},{code:"oc",name:"Occitan"},{code:"or",name:"Oriya"},{code:"om",name:"Oromo"},{code:"fa-ir",name:"Persian/Iran"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"pt-br",name:"Portuguese (Brazil)"},{code:"pa",name:"Punjabi"},{code:"pa-in",name:"Punjabi (India)"},{code:"pa-pk",name:"Punjabi (Pakistan)"},{code:"qu",name:"Quechua"},{code:"rm",name:"Rhaeto-Romanic"},{code:"ro",name:"Romanian"},{code:"ro-mo",name:"Romanian (Moldavia)"},{code:"ru",name:"Russian"},{code:"ru-mo",name:"Russian (Moldavia)"},{code:"sz",name:"Sami (Lappish)"},{code:"sg",name:"Sango"},{code:"sa",name:"Sanskrit"},{code:"sc",name:"Sardinian"},{code:"sd",name:"Sindhi"},{code:"si",name:"Singhalese"},{code:"sr",name:"Serbian"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovenian"},{code:"so",name:"Somani"},{code:"sb",name:"Sorbian"},{code:"es",name:"Spanish"},{code:"es-ar",name:"Spanish (Argentina)"},{code:"es-bo",name:"Spanish (Bolivia)"},{code:"es-cl",name:"Spanish (Chile)"},{code:"es-co",name:"Spanish (Colombia)"},{code:"es-cr",name:"Spanish (Costa Rica)"},{code:"es-do",name:"Spanish (Dominican Republic)"},{code:"es-ec",name:"Spanish (Ecuador)"},{code:"es-sv",name:"Spanish (El Salvador)"},{code:"es-gt",name:"Spanish (Guatemala)"},{code:"es-hn",name:"Spanish (Honduras)"},{code:"es-mx",name:"Spanish (Mexico)"},{code:"es-ni",name:"Spanish (Nicaragua)"},{code:"es-pa",name:"Spanish (Panama)"},{code:"es-py",name:"Spanish (Paraguay)"},{code:"es-pe",name:"Spanish (Peru)"},{code:"es-pr",name:"Spanish (Puerto Rico)"},{code:"es-es",name:"Spanish (Spain)"},{code:"es-uy",name:"Spanish (Uruguay)"},{code:"es-ve",name:"Spanish (Venezuela)"},{code:"sx",name:"Sutu"},{code:"sw",name:"Swahili"},{code:"sv",name:"Swedish"},{code:"sv-fi",name:"Swedish (Finland)"},{code:"sv-sv",name:"Swedish (Sweden)"},{code:"ta",name:"Tamil"},{code:"tt",name:"Tatar"},{code:"te",name:"Teluga"},{code:"th",name:"Thai"},{code:"tig",name:"Tigre"},{code:"ts",name:"Tsonga"},{code:"tn",name:"Tswana"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"},{code:"uk",name:"Ukrainian"},{code:"hsb",name:"Upper Sorbian"},{code:"ur",name:"Urdu"},{code:"ve",name:"Venda"},{code:"vi",name:"Vietnamese"},{code:"vo",name:"Volapuk"},{code:"wa",name:"Walloon"},{code:"cy",name:"Welsh"},{code:"xh",name:"Xhosa"},{code:"ji",name:"Yiddish"},{code:"zu",name:"Zulu"}];function M(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function N(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?M(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):M(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var C={data:function(){return{story:void 0,loadingContext:!0,invalidKey:!0,invalidMode:!0,languagesAvailable:!1,currentLanguage:"",apiKey:"",modeOfTranslation:"",availableLanguages:[],requestedLanguages:[],translationMode:"",spaceId:this.$route.query.space_id}},mounted:function(){window.top===window.self&&window.location.assign("https://app.storyblok.com/oauth/tool_redirect"),window.addEventListener("message",this.processMessage,!1),window.parent.postMessage({action:"tool-changed",tool:"virtual-identity-ag@auto-translations-app",event:"getContext"},"https://app.storyblok.com"),window.parent.postMessage({action:"tool-changed",tool:"virtual-identity-ag@auto-translations-app",event:"heightChange",height:500},"https://app.storyblok.com"),this.initDataSources()},methods:{processMessage:function(e){console.log("event outside",e),e.data&&"get-context"==e.data.action&&(console.log("event",e),this.loadingContext=!1,this.story=e.data.story,this.currentLanguage=""!==e.data.language?e.data.language:"Default Language",e.data.story.localized_paths.length>0&&(this.languagesAvailable=!0,this.availableLanguages=Array.from(e.data.story.localized_paths)))},getlangName:function(e){return"Default Language"!==e?A.find((function(t){return t.code===e})).name:e},getTranslationModeName:function(e){return"FOLDER_LEVEL"===e?"Folder Level":"FIELD_LEVEL"===e&&"Field Level"},getAvailableLanguagesName:function(code){return code+" - "+this.getlangName(code)},initDataSources:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(e.spaceId);case 2:(n=t.sent)&&(e.apiKey=n.apiKey,e.invalidKey=n.invalidKey,e.modeOfTranslation=n.modeOfTranslation,e.invalidMode=n.invalidMode);case 4:case"end":return t.stop()}}),t)})))()},transformLanguageString:function(e){return e.split("-").reduce((function(e,t){return e.trim()+"_"+t.trim()}))},generateXML:function(e){var t="";for(var n in e)t+="".concat("<"+[n]+">"+[e[n]]+"</"+[n]+">");return t},convertXMLToJSON:function(e,t){var n={};for(var r in t){var c=e.substring(e.indexOf("<")+1,e.indexOf(">")),l=e.substring(e.indexOf(">")+1,e.indexOf("</"));e=e.substring(e.indexOf("><")+1,e.length);var d=JSON.stringify(l).replace('""','"');d=d.replace('""','"'),Object.assign(n,Object(o.a)({},c,l))}return n},extractingFields:function(e,t){var n={},c="Default Language"===this.currentLanguage?"":"__i18n__".concat(this.transformLanguageString(this.currentLanguage)),l=function(e){var l=e.split(":"),d=[],m="",h=!0;if(l.length>1){for(var f in t.content)t.content._uid===l[0]?t.content.component===l[1]&&t.content[l[2]]&&(Object.assign(n,Object(o.a)({},"".concat(e),t.content["".concat(l[2]).concat(c)])),h=!1):JSON.stringify(t.content[f]).includes(l[0])&&(d=Array.from(t.content[f]));if(h){do{var v="";if(""!==m&&(d=d[m]),(d=d.reduce((function(e,t){return JSON.stringify(e).includes(l[0])?e:t}))).component!==l[1])for(var y in d)if(JSON.stringify(d[y]).includes(l[1])){v=y;break}if(!Array.isArray(d[v])&&"object"===Object(r.a)(d[v])&&d._uid==l[0]&&d.component==l[1])break;d._uid==l[0]&&(l[0]=l[1]),m=v}while(d.component!==l[1]);d&&Object.assign(n,Object(o.a)({},"".concat(e),d["".concat(l[2]).concat(c)]))}}};for(var d in e)l(d);return n},removeUnwanted:function(e,t){var n={};for(var r in e)t.hasOwnProperty(r)&&Object.assign(n,Object(o.a)({},r,JSON.stringify(e[r])));return n},sendTranslationRequest:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,o,l,d,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.requestedLanguages.length>0)){t.next=16;break}if(e.requestedLanguages.includes(e.currentLanguage)){t.next=13;break}return t.next=4,j(e.spaceId,e.story.id,e.availableLanguages[0].lang);case 4:n=t.sent,r=n.storyObj,o=e.removeUnwanted(n.storyJSON,n.storyJSONWithLang),l=N({},e.extractingFields(o,r)),d="Default Language"!==e.currentLanguage?e.currentLanguage.split("-")[0].toUpperCase():"",m=e.generateXML(l),e.requestedLanguages.forEach(function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(n){var c,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(m,n.split("-")[0].trim(),d,e.apiKey);case 2:if(!(c=t.sent)){t.next=15;break}if(h=N(N({},e.convertXMLToJSON(c.translations[0].text,l)),{},{language:n,page:e.story.id+"",text_nodes:JSON.parse(o.text_nodes),url:JSON.parse(o.url)}),"FOLDER_LEVEL"!==e.modeOfTranslation){t.next=11;break}return t.next=8,L(e.spaceId,e.story.id,JSON.stringify(h));case 8:r=t.sent,t.next=14;break;case 11:return t.next=13,L(e.spaceId,e.story.id,JSON.stringify(h),n);case 13:r=t.sent;case 14:r?e.successMessage():e.errorMessage(n);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=14;break;case 13:e.customErrorMessage("Requested languages should not include source language");case 14:t.next=17;break;case 16:e.customErrorMessage("Please select atleast one target language");case 17:case"end":return t.stop()}}),t)})))()},successMessage:function(){Object(l.Notification)({title:"Success",message:"Translation Successful!",type:"success"})},customErrorMessage:function(e){Object(l.Notification)({title:"Error",message:e,type:"error"})},errorMessage:function(e){Object(l.Notification)({title:"Error",message:"Error occurred for language ".concat(this.getlangName(e),". Please try again later."),type:"error",duration:2e4})}}},P=C,I=(n(448),n(65)),component=Object(I.a)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loadingContext?n("div"):n("div",{staticClass:"fontStyle"},[e.languagesAvailable?n("el-row",[n("p",[e._v("Content will be translated from: "+e._s(e.getlangName(e.currentLanguage)))]),e._v(" "),e.getTranslationModeName(e.modeOfTranslation)?n("p",[e._v("Translation Mode is set to: "),n("strong",[e._v(e._s(e.getTranslationModeName(e.modeOfTranslation)))])]):n("p",{staticClass:"error-text"},[e._v(" Please set the translation mode in the Datasource -> Mode Of Translation ")]),e._v(" "),n("el-row",[n("p",[e._v("Translate Into: (required)")]),e._v(" "),e._l(e.availableLanguages,(function(t){return n("el-checkbox-group",{key:t.lang,attrs:{disabled:e.invalidKey||e.invalidMode},model:{value:e.requestedLanguages,callback:function(t){e.requestedLanguages=t},expression:"requestedLanguages"}},[n("el-checkbox",{attrs:{label:t.lang}},[e._v(" "+e._s(e.getAvailableLanguagesName(t.lang))+" ")])],1)}))],2),e._v(" "),n("el-row",[n("el-button",{attrs:{disabled:e.invalidKey||e.invalidMode,type:"primary",size:"mini"},on:{click:e.sendTranslationRequest}},[e._v("Translate Content")])],1)],1):n("el-row",[n("el-alert",{attrs:{title:"No languages found",type:"error",description:"Please setup field level translation and add languages to use the application. \n\t\t\tFor more info visit: https://www.storyblok.com/docs/guide/in-depth/internationalization","show-icon":"",closable:!1}})],1),e._v(" "),n("el-row",{directives:[{name:"show",rawName:"v-show",value:e.invalidKey,expression:"invalidKey"}]},[n("el-alert",{attrs:{title:"Invalid key. Please enter a valid DeepL api key",type:"error",description:'Please enter a valid DeepL api key in the Datasources. Follow the steps as follows:\n\t\t\t  Go back to the dashboard of your space\n\t\t\t> Select Datasources from sidebar\n\t\t\t> Select Datasource with name "Api Key from DeepL" \n\t\t\t> Replace "Enter-Api-Key-Here" with your Api Key \n\t\t\t> Click save button, second from left.',"show-icon":"",closable:!1}})],1),e._v(" "),n("el-row",{directives:[{name:"show",rawName:"v-show",value:e.invalidMode,expression:"invalidMode"}]},[n("el-alert",{attrs:{title:"Invalid Translation Mode.",type:"error",description:"Please enter a valid translation mode:\n\t\t\t> For folder level translations enter -> FOLDER_LEVEL\n\t\t\t\n\t\t\t> For Field level translations enter -> FIELD_LEVEL","show-icon":"",closable:!1}})],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);